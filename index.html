<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Study Routine To-Do</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
/* Base styles for HTML and Body */
html {
    overflow-x: hidden; /* Prevent horizontal scrollbar on HTML */
}
body {
    font-family: "Inter", sans-serif;
    background-color: #0d0d0d;
    color: #fff;
    margin: 0;
    padding: 15px;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    box-sizing: border-box;
    overflow-x: hidden; /* Prevent horizontal scrollbar on body */
}

/* Main heading styling */
h1 {
    text-align: center;
    color: #f5f5f5;
    font-size: 2.5rem;
    margin-bottom: 20px;
    font-weight: 700;
}

/* Toggle Landscape Button Styling */
#toggleLandscapeBtn {
    background: linear-gradient(135deg, #A020F0, #8A2BE2);
    color: #fff;
    border: none;
    border-radius: 12px;
    padding: 12px 25px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    margin-bottom: 30px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(160, 32, 240, 0.4);
}
#toggleLandscapeBtn:hover {
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 6px 20px rgba(160, 32, 240, 0.6);
}
#toggleLandscapeBtn:active {
    transform: translateY(1px);
}

/* Table container for overflow and landscape transform */
.table-container {
    width: 100%;
    max-width: 98vw;
    overflow-x: auto; /* Allow horizontal scrolling on small screens */
    overflow-y: hidden; /* Hide vertical overflow */
    display: flex;
    justify-content: flex-start; /* Ensure left side is always visible */
    align-items: flex-start;
    transition: transform 0.4s ease, width 0.4s ease, height 0.4s ease;
    padding-bottom: 20px; /* Padding for scrollbar */
}

/* Landscape transform applied to the table container */
.landscape.table-container {
    width: 100vh;  /* Container's width is now viewport's height */
    height: 100vw; /* Container's height is now viewport's width */
    transform-origin: top left; /* Rotate around the top-left corner */
    transform: rotate(90deg) translateY(-100%);
    position: absolute; /* Take out of normal document flow for precise positioning */
    top: 0;
    left: 100vw; /* Position to the right edge of the viewport, so rotation brings it into view */
    margin-bottom: 0; /* Remove potential conflicting margins */
    padding-bottom: 0; /* Remove potential conflicting paddings */
}

/* Table styling */
table {
    min-width: 1200px; /* Minimum width for the table content in portrait */
    border-collapse: separate;
    border-spacing: 0 8px;
    text-align: center;
    margin-bottom: 15px;
    transition: transform 0.4s ease, min-width 0.4s ease;
    background-color: #1a1a1a;
    border-radius: 15px;
    overflow: hidden;
}

/* Adjust table within landscape container */
.landscape table {
    width: 100%; /* Make table fill 100% of its rotated parent container */
    min-width: unset; /* Remove min-width in landscape to allow it to scale */
    max-width: none; /* No max width */
}

th, td {
    padding: 12px 8px;
    border-radius: 10px;
    white-space: nowrap;
    font-weight: 500;
    font-size: 0.95rem;
    height: 65px;
    color: #fff;
    transition: transform 0.25s ease, box-shadow 0.25s ease, opacity 0.3s ease;
    vertical-align: middle;
}

th {
    background: linear-gradient(135deg, #ff7eb3, #ff758c);
    color: #fff;
    position: sticky;
    top: 0;
    z-index: 10;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.3);
}

/* Specific cell backgrounds using linear gradients */
.early { background: linear-gradient(135deg, #2193b0, #6dd5ed); }
.business { background: linear-gradient(135deg, #ee0979, #ff6a00); }
.ml { background: linear-gradient(135deg, #7F00FF, #E100FF); }
.other { background: linear-gradient(135deg, #ff9966, #ff5e62); }
.blank-cell { background: linear-gradient(135deg, #000080, #4682B4); }
.buffer-brainstorm { background: linear-gradient(135deg, #fceabb, #fbda61); color: #333; }
.lab { background: linear-gradient(135deg, #8A2BE2, #A020F0); }
.teach-megha { background: linear-gradient(135deg, #8E2DE2, #4A00E0); }
.startup { background: linear-gradient(135deg, #f093fb, #f5576c); } /* New gradient for Startup */
.bmb { background: linear-gradient(135deg, #6a11cb, #2575fc); } /* New gradient for BMB */
.bmb-self { background: linear-gradient(135deg, #4CAF50, #8BC34A); } /* New gradient for BMB-Self */


.two-line-header {
    height: 90px;
    white-space: normal; /* Allow text to wrap */
    vertical-align: middle;
    padding-top: 5px;
    padding-bottom: 5px;
}

/* Dimmed/Current Day Highlighting */
tbody tr {
    opacity: 0.7;
    transition: opacity 0.3s ease;
}
.dimmed {
    opacity: 0.4 !important;
}
.current-day {
    opacity: 1 !important;
    font-weight: 700;
    box-shadow: 0 0 15px rgba(255,255,255,0.8);
    border: 2px solid #ff7eb3;
    border-radius: 12px;
    animation: glow 2s infinite alternate;
}
@keyframes glow {
    0% { box-shadow: 0 0 8px rgba(255,255,255,0.4); border-color: #ff7eb3; }
    50% { box-shadow: 0 0 25px rgba(255,255,255,0.8), 0 0 35px rgba(255,126,179,0.8); border-color: #ff7eb3; }
    100% { box-shadow: 0 0 8px rgba(255,255,255,0.4); border-color: #ff7eb3; }
}

/* Hover effect for cells */
td:hover {
    transform: translateY(-2px) scale(1.03);
    box-shadow: 0 0 25px rgba(255,255,255,0.7);
    z-index: 1;
}

/* New Styles for Namaj Table and Important Notes */
.notes-container {
    width: 100%;
    max-width: 1000px;
    margin-top: 40px;
    padding: 20px;
    background-color: #1a1a1a;
    border-radius: 15px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    display: flex;
    flex-direction: column;
    align-items: center; /* This centers the children horizontally */
}

/* Added overflow-x to dailyScheduleContainer for horizontal scrolling */
#dailyScheduleContainer {
    overflow-x: auto;
    /* Ensure the content inside can grow, and the container handles the scroll */
    justify-content: flex-start; /* Aligns content to the start */
    align-items: flex-start; /* Aligns content to the start vertically */
    padding-bottom: 15px; /* Space for scrollbar */
}

.notes-container h2 {
    color: #f5f5f5;
    font-size: 1.8rem;
    margin-bottom: 20px;
    font-weight: 600;
    text-align: center; /* This centers the text within the h2 */
}

.namaj-table, .daily-schedule-table {
    width: 95%; /* Increased width */
    max-width: 800px; /* Increased max-width */
    border-collapse: separate;
    border-spacing: 0 5px;
    text-align: center;
    margin-bottom: 30px;
    background-color: #2a2a2a;
    border-radius: 10px;
    overflow: hidden; /* This applies to the table itself, not its container */
    min-width: 380px; /* Ensure a minimum width to enable scrolling if text is long */
}

.namaj-table th, .namaj-table td {
    padding: 10px 15px;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 500;
    color: #fff;
    vertical-align: middle;
}

.namaj-table th {
    background: linear-gradient(135deg, #4CAF50, #2E8B57);
    color: #fff;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    box-shadow: 0 1px 5px rgba(0,0,0,0.2);
}

.namaj-table tr:nth-child(even) td {
    background-color: #333333;
}

.namaj-table tr:nth-child(odd) td {
    background-color: #2a2a2a;
}

/* Specific width adjustments for daily-schedule-table */
.daily-schedule-table th:first-child {
    width: 10%; /* Checkbox column - slightly narrower */
}
.daily-schedule-table td:first-child {
    width: 10%; /* Checkbox column - slightly narrower */
}
.daily-schedule-table th:nth-child(2),
.daily-schedule-table td:nth-child(2) {
    width: 25%; /* Time column narrower */
}

.daily-schedule-table th:last-child,
.daily-schedule-table td:last-child {
    width: 65%; /* Activity column wider */
    white-space: normal; /* Allow text to wrap within the wider column */
}

/* Font size and aesthetics for daily schedule activities */
.daily-schedule-table td:last-child {
    font-size: 1.35rem; /* Increased font size */
    font-weight: 600; /* Bolder */
    text-shadow: 0 0 5px rgba(255,255,255,0.3); /* Subtle glow */
}

/* Checkbox styling */
.daily-schedule-table input[type="checkbox"],
.namaj-table input[type="checkbox"],
.todo-list-item input[type="checkbox"] { /* Apply to namaj table too */
    transform: scale(1.4); /* Make checkbox slightly larger */
    accent-color: #4CAF50; /* Aesthetic color for the checkbox */
    cursor: pointer;
    vertical-align: middle;
    margin: 0; /* Remove default margin */
}

/* Namaj table specific column widths for checkbox */
.namaj-table th:first-child {
    width: 15%; /* Checkbox column */
}
.namaj-table td:first-child {
    width: 15%; /* Checkbox column */
}
.namaj-table th:nth-child(2) {
    width: 30%; /* Prayer name column */
}
.namaj-table td:nth-child(2) {
    width: 30%; /* Prayer name column */
}
.namaj-table th:last-child {
    width: 55%; /* Time column */
}
.namaj-table td:last-child {
    width: 55%; /* Time column */
}


.important-notes-card {
    background: linear-gradient(135deg, #6A11CB, #2575FC);
    padding: 20px;
    border-radius: 15px;
    margin-top: 20px;
    width: 90%;
    max-width: 500px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
    text-align: center;
}

.important-notes-card p {
    font-size: 1.1rem;
    line-height: 1.6;
    margin: 10px 0;
    font-weight: 500;
}

.important-notes-card strong {
    color: #ffe0b2;
}

/* To-Do List Specific Styles */
#todoContainer {
    max-width: 800px; /* Same max-width as other tables */
    width: 95%; /* Same width as other tables */
    margin-top: 40px;
    padding: 20px;
    background-color: #1a1a1a;
    border-radius: 15px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    display: flex;
    flex-direction: column;
    align-items: center; /* Center content within */
}

#todoInputGroup {
    display: flex;
    width: 100%;
    max-width: 400px; /* Limit input group width */
    margin-bottom: 20px;
    gap: 10px;
}

#newTodoTask {
    flex-grow: 1;
    padding: 12px;
    border: 2px solid #6a11cb;
    border-radius: 10px;
    background-color: #2a2a2a;
    color: #fff;
    font-size: 1rem;
    outline: none;
    transition: border-color 0.3s ease;
}

#newTodoTask:focus {
    border-color: #2575fc;
}

#addTodoBtn {
    background: linear-gradient(135deg, #8A2BE2, #A020F0);
    color: #fff;
    border: none;
    border-radius: 10px;
    padding: 12px 20px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 2px 10px rgba(138, 43, 226, 0.4);
}
#addTodoBtn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(138, 43, 226, 0.6);
}
#addTodoBtn:active {
    transform: translateY(0);
}

#todoList {
    list-style: none;
    padding: 0;
    margin: 0;
    width: 100%;
    max-width: 500px; /* Max width for list items */
}

.todo-list-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background-color: #2a2a2a;
    border-radius: 10px;
    padding: 10px 15px;
    margin-bottom: 8px;
    font-size: 1.1rem;
    color: #fff;
    transition: opacity 0.3s ease;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}

.todo-list-item.completed {
    opacity: 0.6;
    background-color: #333333;
    text-decoration: line-through;
    color: #aaa;
}

.todo-item-content {
    display: flex;
    align-items: center;
    gap: 10px;
    flex-grow: 1;
    text-align: left; /* Ensure text aligns left */
}

.todo-item-text {
    word-break: break-word; /* Allow long words to break */
    white-space: normal; /* Allow text to wrap */
    flex-grow: 1;
}

.delete-todo-btn {
    background: none;
    border: none;
    color: #ff5e62;
    font-size: 1.2rem;
    cursor: pointer;
    margin-left: 10px;
    padding: 5px;
    border-radius: 5px;
    transition: background-color 0.2s ease, color 0.2s ease;
}

.delete-todo-btn:hover {
    background-color: #ff5e62;
    color: #fff;
}

/* Media queries for responsiveness */
@media (max-width: 768px) {
    h1 {
        font-size: 2rem;
    }
    th, td {
        padding: 10px 6px;
        font-size: 0.85rem;
        height: 55px;
    }
    table {
        min-width: 900px;
    }
    .namaj-table, .daily-schedule-table {
        width: 95%;
        min-width: 350px; /* Adjusted min-width for smaller screens */
    }
    .important-notes-card, #todoContainer {
        width: 95%;
    }
    /* Adjust for smaller screens */
    .daily-schedule-table th:first-child,
    .daily-schedule-table td:first-child {
        width: 18%; /* Checkbox column */
    }
    .daily-schedule-table th:nth-child(2),
    .daily-schedule-table td:nth-child(2) {
        width: 35%; /* Time column narrower */
    }
    .daily-schedule-table th:last-child,
    .daily-schedule-table td:last-child {
        width: 47%; /* Activity column wider */
    }
    .daily-schedule-table td:last-child {
        font-size: 1.1rem; /* Adjust font size for smaller screens */
    }
    .daily-schedule-table input[type="checkbox"],
    .namaj-table input[type="checkbox"],
    .todo-list-item input[type="checkbox"] {
        transform: scale(1.2);
    }
    /* Namaj table specific for smaller screens */
    .namaj-table th:first-child,
    .namaj-table td:first-child {
        width: 18%; /* Checkbox column */
    }
    .namaj-table th:nth-child(2),
    .namaj-table td:nth-child(2) {
        width: 35%; /* Prayer name column */
    }
    .namaj-table th:last-child,
    .namaj-table td:last-child {
        width: 47%; /* Time column */
    }
    #todoInputGroup {
        flex-direction: column;
        align-items: center;
    }
    #newTodoTask {
        width: calc(100% - 24px); /* Full width minus padding */
        margin-bottom: 10px;
    }
    #addTodoBtn {
        width: 100%;
        max-width: 200px; /* Limit button width */
    }
}

@media (max-width: 480px) {
    body {
        padding: 10px;
    }
    h1 {
        font-size: 1.8rem;
    }
    #toggleLandscapeBtn {
        padding: 10px 18px;
        font-size: 0.9rem;
    }
    th, td {
        padding: 8px 4px;
        font-size: 0.8rem;
        height: 50px;
    }
    table {
        min-width: 800px;
    }
    .notes-container h2 {
        font-size: 1.5rem;
    }
    .namaj-table th, .namaj-table td,
    .daily-schedule-table th, .daily-schedule-table td {
        font-size: 0.9rem;
        padding: 8px 10px;
    }
    .important-notes-card p {
        font-size: 1rem;
    }
    /* Even tighter for very small screens */
    .daily-schedule-table th:first-child,
    .daily-schedule-table td:first-child {
        width: 20%;
    }
    .daily-schedule-table th:nth-child(2),
    .daily-schedule-table td:nth-child(2) {
        width: 40%;
    }
    .daily-schedule-table th:last-child,
    .daily-schedule-table td:last-child {
        width: 40%;
    }
    .daily-schedule-table td:last-child {
        font-size: 1rem; /* Further adjust font size for very small screens */
    }
    .daily-schedule-table input[type="checkbox"],
    .namaj-table input[type="checkbox"],
    .todo-list-item input[type="checkbox"] {
        transform: scale(1.1);
    }
    /* Namaj table specific for very small screens */
    .namaj-table th:first-child,
    .namaj-table td:first-child {
        width: 20%;
    }
    .namaj-table th:nth-child(2),
    .namaj-table td:nth-child(2) {
        width: 40%;
    }
    .namaj-table th:last-child,
    .namaj-table td:last-child {
        width: 40%;
    }
}
</style>
</head>
<body>

<h1>Weekly Study Routine To-Do</h1>
<button id="toggleLandscapeBtn">🌄 Toggle Landscape View</button>

<div id="dailyScheduleContainer" class="notes-container">
    <h2>Today's Schedule</h2>
    <table id="dailyScheduleTable" class="daily-schedule-table">
        <thead>
            <tr>
                <th>Done</th> <!-- New column for checkbox -->
                <th>Time</th>
                <th>Activity</th>
            </tr>
        </thead>
        <tbody>
            <!-- Daily schedule will be populated here by JavaScript -->
        </tbody>
    </table>
</div>

<div class="table-container" id="tableContainer">
    <table id="routineTable">
        <thead>
            <tr>
                <th class="two-line-header">Day</th>
                <th class="two-line-header">4:00 – 6:00<br>AM</th>
                <th class="two-line-header">6:00 – 7:00<br>AM</th>
                <th class="two-line-header">7:00 – 8:00<br>AM<br>Buffer</th>
                <th class="two-line-header">8:00 AM –<br>1:00 PM</th>
                <th class="two-line-header">1:00 – 2:00 PM<br>Namaj</th>
                <th class="two-line-header">2:00 – 3:00<br>PM</th>
                <th class="two-line-header">3:00 – 4:00<br>PM</th>
                <th class="two-line-header">4:00 – 5:00<br>PM</th>
                <th class="two-line-header">5:00 – 6:00 PM<br>Buffer</th>
                <th class="two-line-header">6:00 – 7:00<br>PM</th>
                <th class="two-line-header">7:00 – 8:00<br>PM</th>
                <th class="8:00 – 8:30<br>PM">8:00 – 8:30<br>PM</th>
                <th class="two-line-header">8:30 – 10:00<br>PM</th>
                <th class="two-line-header">10:00 – 11:00<br>PM<br>Namaj</th>
            </tr>
        </thead>
        <tbody>
            <!-- Friday -->
            <tr data-day="Friday">
                <th>Friday</th>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="blank-cell">Prayer</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="other">Walking Session</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="teach-megha">Teach Megha</td>
                <td class="teach-megha">Teach Megha</td>
                <td class="blank-cell">Break</td>
                <td class="ml">ML Project</td>
                <td class="buffer-brainstorm">Buffer</td>
            </tr>
            <!-- Saturday -->
            <tr data-day="Saturday">
                <th>Saturday</th>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="startup">Startup</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="teach-megha">Teach Megha (8-10 AM)<br>Self-Paced DL (10 AM-1 PM)</td>
                <td class="blank-cell">Prayer</td>
                <td class="ml">Self-Paced Deep Learning</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="other">Walking Session</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="blank-cell">Break</td>
                <td class="ml">ML Project</td>
                <td class="blank-cell">Prayer</td>
            </tr>
            <!-- Sunday -->
            <tr data-day="Sunday">
                <th>Sunday</th>
                <td class="early">Early Study</td>
                <td class="startup">Startup</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="bmb">BMB</td>
                <td class="blank-cell">Prayer</td>
                <td class="bmb-self">BMB-Self</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="bmb-self">BMB-Self</td>
                <td class="bmb-self">BMB-Self</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="blank-cell">Break</td>
                <td class="ml">ML Project</td>
                <td class="blank-cell">Prayer</td>
            </tr>
            <!-- Monday -->
            <tr data-day="Monday">
                <th>Monday</th>
                <td class="early">Early Study</td>
                <td class="startup">Startup</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="bmb">BMB</td>
                <td class="blank-cell">Prayer</td>
                <td class="lab">Lab Work</td>
                <td class="lab">Lab Work</td>
                <td class="lab">Lab Work</td>
                <td class="buffer-brainstorm">Brainstorm</td>
                <td class="bmb-self">BMB-Self</td>
                <td class="bmb-self">BMB-Self</td>
                <td class="blank-cell">Break</td>
                <td class="ml">ML Project</td>
                <td class="blank-cell">Prayer</td>
            </tr>
            <!-- Tuesday -->
            <tr data-day="Tuesday">
                <th>Tuesday</th>
                <td class="early">Early Study</td>
                <td class="startup">Startup</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="bmb">BMB</td>
                <td class="blank-cell">Prayer</td>
                <td class="bmb-self">BMB-Self</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="bmb-self">BMB-Self</td>
                <td class="bmb-self">BMB-Self</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="blank-cell">Break</td>
                <td class="ml">ML Project</td>
                <td class="blank-cell">Prayer</td>
            </tr>
            <!-- Wednesday -->
            <tr data-day="Wednesday">
                <th>Wednesday</th>
                <td class="early">Early Study</td>
                <td class="startup">Startup</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="bmb">BMB</td>
                <td class="blank-cell">Prayer</td>
                <td class="lab">Lab Work</td>
                <td class="lab">Lab Work</td>
                <td class="lab">Lab Work</td>
                <td class="buffer-brainstorm">Brainstorm</td>
                <td class="bmb-self">BMB-Self</td>
                <td class="bmb-self">BMB-Self</td>
                <td class="blank-cell">Break</td>
                <td class="ml">ML Project</td>
                <td class="blank-cell">Prayer</td>
            </tr>
            <!-- Thursday -->
            <tr data-day="Thursday">
                <th>Thursday</th>
                <td class="early">Early Study</td>
                <td class="startup">Startup</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="bmb">BMB</td>
                <td class="blank-cell">Prayer</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="bmb-self">BMB-Self</td>
                <td class="bmb-self">BMB-Self</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="blank-cell">Break</td>
                <td class="ml">ML Project</td>
                <td class="blank-cell">Prayer</td>
            </tr>
        </tbody>
    </table>
</div>

<div class="notes-container">
    <h2>Daily Namaj Times</h2>
    <table class="namaj-table">
        <thead>
            <tr>
                <th>Done</th> <!-- Added checkbox column header -->
                <th>Prayer</th>
                <th>Time (Approx.)</th>
            </tr>
        </thead>
        <tbody>
            <tr data-prayer="Fajar">
                <td><input type="checkbox" class="namaj-checkbox"></td>
                <td>Fajar</td>
                <td>5:00 AM</td>
            </tr>
            <tr data-prayer="Zohar">
                <td><input type="checkbox" class="namaj-checkbox"></td>
                <td>Zohar</td>
                <td>1:00 PM</td>
            </tr>
            <tr data-prayer="Asar">
                <td><input type="checkbox" class="namaj-checkbox"></td>
                <td>Asar</td>
                <td>4:30 PM</td>
            </tr>
            <tr data-prayer="Magrib">
                <td><input type="checkbox" class="namaj-checkbox"></td>
                <td>Magrib</td>
                <td>6:45 PM</td>
            </tr>
            <tr data-prayer="Esha">
                <td><input type="checkbox" class="namaj-checkbox"></td>
                <td>Esha</td>
                <td>8:30 PM</td>
            </tr>
        </tbody>
    </table>

    <h2>Important Notes</h2>
    <div class="important-notes-card">
        <p>☕ **Eat a cup of coffee at 1:00 PM.**</p>
        <p>Always keep your **coffee mug** with you!</p>
    </div>
</div>

<!-- New To-Do List Section -->
<div id="todoContainer" class="notes-container">
    <h2>My To-Do List</h2>
    <div id="todoInputGroup">
        <input type="text" id="newTodoTask" placeholder="Add a new task...">
        <button id="addTodoBtn">Add Task</button>
    </div>
    <ul id="todoList">
        <!-- To-Do items will be populated here by JavaScript -->
    </ul>
</div>

<script>
const routineTable = document.getElementById("routineTable");
const tableRows = routineTable.querySelectorAll("tbody tr");
const toggleLandscapeBtn = document.getElementById("toggleLandscapeBtn");
const tableContainer = document.getElementById("tableContainer");
const dailyScheduleTableBody = document.querySelector("#dailyScheduleTable tbody");
const namajTableBody = document.querySelector(".namaj-table tbody");
const newTodoTaskInput = document.getElementById("newTodoTask");
const addTodoBtn = document.getElementById("addTodoBtn");
const todoListUL = document.getElementById("todoList");

// --- Main Routine and Daily Schedule Functions ---

function initializeRoutineDisplay() {
    const today = new Date();
    const dayOfWeek = today.getDay(); // 0=Sunday, 1=Monday, ... 6=Saturday
    // Adjusting dayMap to match 0-indexed rows in HTML body after Friday
    // Friday: 0, Saturday: 1, Sunday: 2, Monday: 3, Tuesday: 4, Wednesday: 5, Thursday: 6
    const dayMap = { 5:0, 6:1, 0:2, 1:3, 2:4, 3:5, 4:6 };
    const currentDayRowIndex = dayMap[dayOfWeek];

    // Remove any existing highlighting classes first
    tableRows.forEach((row) => {
        row.classList.remove("current-day", "dimmed");
    });

    // Apply current-day or dimmed class
    tableRows.forEach((row, index) => {
        if(index === currentDayRowIndex) {
            row.classList.add("current-day");
        } else {
            row.classList.add("dimmed");
        }
    });

    // Load task completion status from localStorage for main routine table
    tableRows.forEach(row => {
        const dayDataset = row.dataset.day;
        const cells = row.querySelectorAll("td");
        cells.forEach((cell,i)=>{
            const key = `${dayDataset}-${i}`; // Unique key for each cell
            if(localStorage.getItem(key) === "done") {
                cell.style.opacity = "0.2"; // Dim if marked as done
            } else {
                cell.style.opacity = "1"; // Ensure full opacity if not done
            }
        });
    });

    displayCurrentDaySchedule(); // Call this to populate the daily schedule table
    initializeNamajDisplay(); // Initialize namaj checkboxes
    renderToDoList(); // Initialize the To-Do list
}

function toggleTaskCompletion(cell, dayDataset, cellIndex, isCheckbox = false) {
    const key = `${dayDataset}-${cellIndex}`;
    const mainTableCell = routineTable.querySelector(`[data-day="${dayDataset}"]`).querySelectorAll('td')[cellIndex];

    if (isCheckbox) {
        // If triggered by checkbox, update based on checkbox state
        if (cell.checked) {
            mainTableCell.style.opacity = "0.2";
            localStorage.setItem(key, "done");
        } else {
            mainTableCell.style.opacity = "1";
            localStorage.removeItem(key);
        }
    } else {
        // If triggered by main table cell click, toggle state
        if (mainTableCell.style.opacity === "0.2") {
            mainTableCell.style.opacity = "1";
            localStorage.removeItem(key);
        } else {
            mainTableCell.style.opacity = "0.2";
            localStorage.setItem(key, "done");
        }
    }
    // Re-display current day's schedule after a change
    displayCurrentDaySchedule();
}

function addCellClickListeners() {
    tableRows.forEach(row => {
        const dayDataset = row.dataset.day;
        const cells = row.querySelectorAll("td");
        cells.forEach((cell, i) => {
            if(cell.textContent.trim() !== "" && !cell.classList.contains('blank-cell')) {
                cell.addEventListener("click", () => toggleTaskCompletion(cell, dayDataset, i, false));
            }
        });
    });
}

function displayCurrentDaySchedule() {
    dailyScheduleTableBody.innerHTML = ''; // Clear previous entries

    const today = new Date();
    const dayOfWeek = today.getDay(); // 0=Sunday, 1=Monday, ... 6=Saturday
    const dayMap = { 5:0, 6:1, 0:2, 1:3, 2:4, 3:5, 4:6 };
    const currentDayRowIndex = dayMap[dayOfWeek];

    const currentDayRow = tableRows[currentDayRowIndex];
    if (!currentDayRow) return; // Exit if no row for today

    const timeHeaders = Array.from(routineTable.querySelectorAll("thead th")).slice(1); // Skip 'Day' header
    const currentDayCells = Array.from(currentDayRow.querySelectorAll("td"));

    timeHeaders.forEach((header, index) => {
        let timeSlot = header.textContent.replace(/\s+/g, ' ').trim(); // Clean up text content
        const timeMatch = timeSlot.match(/(\d{1,2}:\d{2}\s*–\s*\d{1,2}:\d{2}\s*(?:AM|PM))/i);
        if (timeMatch) {
            timeSlot = timeMatch[1].trim();
        }

        const activity = currentDayCells[index] ? currentDayCells[index].textContent.trim() : '';
        const dayDataset = currentDayRow.dataset.day;
        const mainTableCell = currentDayCells[index];
        const key = `${dayDataset}-${index}`;
        const isDone = localStorage.getItem(key) === "done";

        if (activity !== "" && activity !== "Buffer") {
            const row = dailyScheduleTableBody.insertRow();
            const checkboxCell = row.insertCell();
            const timeCell = row.insertCell();
            const activityCell = row.insertCell();

            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.checked = isDone;
            checkbox.addEventListener('change', () => toggleTaskCompletion(checkbox, dayDataset, index, true));

            checkboxCell.appendChild(checkbox);
            timeCell.textContent = timeSlot;
            activityCell.textContent = activity;

            const mainTableCellClasses = Array.from(mainTableCell.classList);
            mainTableCellClasses.forEach(className => {
                if (className !== 'current-day' && className !== 'dimmed') {
                    activityCell.classList.add(className);
                }
            });

            if (isDone) {
                activityCell.style.opacity = "0.6";
                timeCell.style.opacity = "0.6";
            } else {
                activityCell.style.opacity = "1";
                timeCell.style.opacity = "1";
            }
        }
    });

    if (dailyScheduleTableBody.rows.length === 0) {
        const row = dailyScheduleTableBody.insertRow();
        const cell = row.insertCell();
        cell.colSpan = 3;
        cell.textContent = "No specific activities scheduled for today. Enjoy your buffer time!";
        cell.style.fontStyle = "italic";
        cell.style.color = "#aaa";
        cell.style.padding = "20px";
        cell.style.backgroundColor = "#2a2a2a";
        cell.style.borderRadius = "8px";
    }
}

// --- Namaj Times Functions ---

function initializeNamajDisplay() {
    const namajRows = namajTableBody.querySelectorAll("tr");
    namajRows.forEach(row => {
        const prayerName = row.dataset.prayer;
        const checkbox = row.querySelector(".namaj-checkbox");
        const prayerCells = row.querySelectorAll("td:not(:first-child)"); // Select Prayer and Time cells

        const key = `namaj-${prayerName}`;
        const isDone = localStorage.getItem(key) === "done";

        checkbox.checked = isDone;
        if (isDone) {
            prayerCells.forEach(cell => cell.style.opacity = "0.6");
        } else {
            prayerCells.forEach(cell => cell.style.opacity = "1");
        }

        checkbox.addEventListener('change', () => toggleNamajCompletion(checkbox, prayerName));
    });
}

function toggleNamajCompletion(checkbox, prayerName) {
    const key = `namaj-${prayerName}`;
    const row = checkbox.closest("tr");
    const prayerCells = row.querySelectorAll("td:not(:first-child)"); // Select Prayer and Time cells

    if (checkbox.checked) {
        localStorage.setItem(key, "done");
        prayerCells.forEach(cell => cell.style.opacity = "0.6");
    } else {
        localStorage.removeItem(key);
        prayerCells.forEach(cell => cell.style.opacity = "1");
    }
}

// --- To-Do List Functions ---

function getToDoTasks() {
    const tasksString = localStorage.getItem('todoTasks');
    return tasksString ? JSON.parse(tasksString) : [];
}

function saveToDoTasks(tasks) {
    localStorage.setItem('todoTasks', JSON.stringify(tasks));
}

function renderToDoList() {
    todoListUL.innerHTML = ''; // Clear existing list
    const tasks = getToDoTasks();

    if (tasks.length === 0) {
        const noTasksMessage = document.createElement('li');
        noTasksMessage.textContent = "No tasks yet! Add one above.";
        noTasksMessage.style.fontStyle = "italic";
        noTasksMessage.style.color = "#aaa";
        noTasksMessage.style.padding = "10px";
        noTasksMessage.style.textAlign = "center";
        todoListUL.appendChild(noTasksMessage);
        return;
    }

    tasks.forEach((task, index) => {
        const listItem = document.createElement('li');
        listItem.classList.add('todo-list-item');
        if (task.completed) {
            listItem.classList.add('completed');
        }

        const contentDiv = document.createElement('div');
        contentDiv.classList.add('todo-item-content');

        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.checked = task.completed;
        checkbox.addEventListener('change', () => toggleToDoCompletion(index));

        const taskTextSpan = document.createElement('span');
        taskTextSpan.classList.add('todo-item-text');
        taskTextSpan.textContent = task.text;

        const deleteButton = document.createElement('button');
        deleteButton.classList.add('delete-todo-btn');
        deleteButton.innerHTML = '&times;'; // 'x' icon
        deleteButton.title = 'Delete task';
        deleteButton.addEventListener('click', () => deleteToDoTask(index));

        contentDiv.appendChild(checkbox);
        contentDiv.appendChild(taskTextSpan);
        listItem.appendChild(contentDiv);
        listItem.appendChild(deleteButton);
        todoListUL.appendChild(listItem);
    });
}

function addTodoTask() {
    const taskText = newTodoTaskInput.value.trim();
    if (taskText === "") {
        return; // Don't add empty tasks
    }

    const tasks = getToDoTasks();
    tasks.push({ text: taskText, completed: false });
    saveToDoTasks(tasks);
    newTodoTaskInput.value = ''; // Clear input field
    renderToDoList(); // Re-render the list
}

function toggleToDoCompletion(index) {
    const tasks = getToDoTasks();
    if (index >= 0 && index < tasks.length) {
        tasks[index].completed = !tasks[index].completed;
        saveToDoTasks(tasks);
        renderToDoList(); // Re-render to apply dimming/strike-through
    }
}

function deleteToDoTask(index) {
    let tasks = getToDoTasks();
    if (index >= 0 && index < tasks.length) {
        tasks.splice(index, 1); // Remove 1 element at the given index
        saveToDoTasks(tasks);
        renderToDoList(); // Re-render the list
    }
}

// --- Event Listeners and Initialization ---

// Event listener for adding a new to-do task
addTodoBtn.addEventListener('click', addTodoTask);
newTodoTaskInput.addEventListener('keypress', (event) => {
    if (event.key === 'Enter') {
        addTodoTask();
    }
});

// Event listener for the toggle landscape button
toggleLandscapeBtn.addEventListener("click", () => {
    tableContainer.classList.toggle("landscape");
    // Change button text based on the landscape class presence
    if (tableContainer.classList.contains("landscape")) {
        toggleLandscapeBtn.textContent = "🔄 Exit Landscape View";
    } else {
        toggleLandscapeBtn.textContent = "🌄 Toggle Landscape View";
    }
});

// Initialize display and add listeners when the DOM is fully loaded
document.addEventListener("DOMContentLoaded", () => {
    initializeRoutineDisplay();
    addCellClickListeners();
});

// Re-initialize display on window load to ensure all styles are applied consistently
window.onload = initializeRoutineDisplay;
</script>

</body>
</html>

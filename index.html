<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Study Routine To-Do</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
/* Base styles for HTML and Body */
html {
    overflow-x: hidden; /* Prevent horizontal scrollbar on HTML */
}
body {
    font-family: "Inter", sans-serif;
    background-color: #0d0d0d;
    color: #fff;
    margin: 0;
    padding: 15px;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    box-sizing: border-box;
    overflow-x: hidden; /* Prevent horizontal scrollbar on body */
}

/* Main heading styling */
h1 {
    text-align: center;
    color: #f5f5f5;
    font-size: 2.5rem;
    margin-bottom: 20px;
    font-weight: 700;
}

/* Toggle Landscape Button Styling */
#toggleLandscapeBtn {
    background: linear-gradient(135deg, #A020F0, #8A2BE2);
    color: #fff;
    border: none;
    border-radius: 12px;
    padding: 12px 25px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    margin-bottom: 30px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(160, 32, 240, 0.4);
}
#toggleLandscapeBtn:hover {
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 6px 20px rgba(160, 32, 240, 0.6);
}
#toggleLandscapeBtn:active {
    transform: translateY(1px);
}

/* Table container for overflow and landscape transform */
.table-container {
    width: 100%;
    max-width: 98vw;
    overflow-x: auto; /* Allow horizontal scrolling on small screens */
    overflow-y: hidden; /* Hide vertical overflow */
    display: flex;
    /* IMPORTANT FIX: Changed to flex-start to ensure left side is always visible */
    justify-content: flex-start;
    align-items: flex-start;
    transition: transform 0.4s ease, width 0.4s ease, height 0.4s ease;
    padding-bottom: 20px; /* Padding for scrollbar */
}

/* Landscape transform applied to the table container */
.landscape.table-container {
    /* When rotated 90deg, viewport height becomes the new width and vice-versa */
    width: 100vh;  /* Container's width is now viewport's height */
    height: 100vw; /* Container's height is now viewport's width */
    transform-origin: top left; /* Rotate around the top-left corner */
    /* Rotate 90deg clockwise, then translate up by 100% of its NEW height */
    transform: rotate(90deg) translateY(-100%);
    position: absolute; /* Take out of normal document flow for precise positioning */
    top: 0;
    left: 100vw; /* Position to the right edge of the viewport, so rotation brings it into view */
    margin-bottom: 0; /* Remove potential conflicting margins */
    padding-bottom: 0; /* Remove potential conflicting paddings */
}

/* Table styling */
table {
    min-width: 1200px; /* Minimum width for the table content in portrait */
    border-collapse: separate;
    border-spacing: 0 8px;
    text-align: center;
    margin-bottom: 15px;
    transition: transform 0.4s ease, min-width 0.4s ease;
    background-color: #1a1a1a;
    border-radius: 15px;
    overflow: hidden;
}

/* Adjust table within landscape container */
.landscape table {
    width: 100%; /* Make table fill 100% of its rotated parent container */
    min-width: unset; /* Remove min-width in landscape to allow it to scale */
    max-width: none; /* No max width */
}

th, td {
    padding: 12px 8px;
    border-radius: 10px;
    white-space: nowrap;
    font-weight: 500;
    font-size: 0.95rem;
    height: 65px;
    color: #fff;
    transition: transform 0.25s ease, box-shadow 0.25s ease, opacity 0.3s ease;
    vertical-align: middle;
}

th {
    background: linear-gradient(135deg, #ff7eb3, #ff758c);
    color: #fff;
    position: sticky;
    top: 0;
    z-index: 10;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.3);
}

/* Specific cell backgrounds using linear gradients */
.early { background: linear-gradient(135deg, #2193b0, #6dd5ed); }
.biochem { background: linear-gradient(135deg, #11998e, #38ef7d); }
.business { background: linear-gradient(135deg, #ee0979, #ff6a00); }
.ml { background: linear-gradient(135deg, #7F00FF, #E100FF); }
.other { background: linear-gradient(135deg, #ff9966, #ff5e62); }
.blank-cell { background: linear-gradient(135deg, #000080, #4682B4); }
.buffer-brainstorm { background: linear-gradient(135deg, #fceabb, #fbda61); color: #333; }
.lab { background: linear-gradient(135deg, #8A2BE2, #A020F0); }
.teach-megha { background: linear-gradient(135deg, #8E2DE2, #4A00E0); }

.two-line-header {
    height: 90px;
    white-space: normal;
    vertical-align: middle;
    padding-top: 5px;
    padding-bottom: 5px;
}

/* Dimmed/Current Day Highlighting */
tbody tr {
    opacity: 0.7;
    transition: opacity 0.3s ease;
}
.dimmed {
    opacity: 0.4;
}
.current-day {
    opacity: 1;
    font-weight: 600;
    box-shadow: 0 0 15px rgba(255,255,255,0.6);
    animation: glow 2s infinite alternate;
    border: 2px solid #ff7eb3;
    border-radius: 12px;
}
@keyframes glow {
    0% { box-shadow: 0 0 8px rgba(255,255,255,0.4); border-color: #ff7eb3; }
    50% { box-shadow: 0 0 25px rgba(255,255,255,0.8), 0 0 35px rgba(255,126,179,0.8); border-color: #ff7eb3; }
    100% { box-shadow: 0 0 8px rgba(255,255,255,0.4); border-color: #ff7eb3; }
}

/* Hover effect for cells */
td:hover {
    transform: translateY(-2px) scale(1.03);
    box-shadow: 0 0 25px rgba(255,255,255,0.7);
    z-index: 1;
}

/* Media queries for responsiveness */
@media (max-width: 768px) {
    h1 {
        font-size: 2rem;
    }
    th, td {
        padding: 10px 6px;
        font-size: 0.85rem;
        height: 55px;
    }
    table {
        min-width: 900px;
    }
}

@media (max-width: 480px) {
    body {
        padding: 10px;
    }
    h1 {
        font-size: 1.8rem;
    }
    #toggleLandscapeBtn {
        padding: 10px 18px;
        font-size: 0.9rem;
    }
    th, td {
        padding: 8px 4px;
        font-size: 0.8rem;
        height: 50px;
    }
    table {
        min-width: 800px;
    }
}
</style>
</head>
<body>

<h1>Weekly Study Routine To-Do</h1>
<button id="toggleLandscapeBtn">ðŸŒ„ Toggle Landscape View</button>

<div class="table-container" id="tableContainer">
    <table id="routineTable">
        <thead>
            <tr>
                <th>Day</th>
                <th>4:00 â€“ 6:00 AM</th>
                <th>6:00 â€“ 7:00 AM</th>
                <th class="two-line-header">7:00 â€“ 8:00 AM<br>Buffer</th>
                <th>8:00 AM â€“ 1:00 PM</th>
                <th>1:00 â€“ 2:00 PM<br>Namaj</th>
                <th>2:00 â€“ 3:00 PM</th>
                <th>3:00 â€“ 4:00 PM</th>
                <th>4:00 â€“ 5:00 PM</th>
                <th>5:00 â€“ 6:00 PM<br>Buffer</th>
                <th>6:00 â€“ 7:00 PM</th>
                <th>7:00 â€“ 8:00 PM</th>
                <th>8:00 â€“ 8:30 PM</th>
                <th>8:30 â€“ 10:00 PM</th>
                <th>10:00 â€“ 11:00 PM<br>Namaj</th>
            </tr>
        </thead>
        <tbody>
            <tr data-day="Friday">
                <th>Friday</th>
                <td class="early">Early Study</td>
                <td class="biochem">Biochem</td>
                <td class="buffer-brainstorm">Brainstorm</td>
                <td class="business">Business Studies</td>
                <td class="blank-cell">Prayer</td>
                <td class="ml">ML Project</td>
                <td class="other">Research</td>
                <td class="lab">Lab Work</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="teach-megha">Teach Megha</td>
                <td class="biochem">Biochem</td>
                <td class="blank-cell">Break</td>
                <td class="ml">ML Project</td>
                <td class="blank-cell">Prayer</td>
            </tr>
            <tr data-day="Saturday">
                <th>Saturday</th>
                <td class="early">Early Study</td>
                <td class="ml">ML Project</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="biochem">Biochem</td>
                <td class="blank-cell">Prayer</td>
                <td class="business">Business Studies</td>
                <td class="other">Reading</td>
                <td class="lab">Lab Work</td>
                <td class="buffer-brainstorm">Brainstorm</td>
                <td class="biochem">Biochem</td>
                <td class="teach-megha">Teach Megha</td>
                <td class="blank-cell">Break</td>
                <td class="business">Business Studies</td>
                <td class="blank-cell">Prayer</td>
            </tr>
            <tr data-day="Sunday">
                <th>Sunday</th>
                <td class="early">Early Study</td>
                <td class="business">Business Studies</td>
                <td class="buffer-brainstorm">Brainstorm</td>
                <td class="ml">ML Project</td>
                <td class="blank-cell">Prayer</td>
                <td class="biochem">Biochem</td>
                <td class="lab">Lab Work</td>
                <td class="other">Research</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="business">Business Studies</td>
                <td class="ml">ML Project</td>
                <td class="blank-cell">Break</td>
                <td class="biochem">Biochem</td>
                <td class="blank-cell">Prayer</td>
            </tr>
            <tr data-day="Monday">
                <th>Monday</th>
                <td class="early">Early Study</td>
                <td class="other">Reading</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="biochem">Biochem</td>
                <td class="blank-cell">Prayer</td>
                <td class="ml">ML Project</td>
                <td class="business">Business Studies</td>
                <td class="lab">Lab Work</td>
                <td class="buffer-brainstorm">Brainstorm</td>
                <td class="teach-megha">Teach Megha</td>
                <td class="biochem">Biochem</td>
                <td class="blank-cell">Break</td>
                <td class="ml">ML Project</td>
                <td class="blank-cell">Prayer</td>
            </tr>
            <tr data-day="Tuesday">
                <th>Tuesday</th>
                <td class="early">Early Study</td>
                <td class="ml">ML Project</td>
                <td class="buffer-brainstorm">Brainstorm</td>
                <td class="business">Business Studies</td>
                <td class="blank-cell">Prayer</td>
                <td class="biochem">Biochem</td>
                <td class="other">Research</td>
                <td class="lab">Lab Work</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="biochem">Biochem</td>
                <td class="teach-megha">Teach Megha</td>
                <td class="blank-cell">Break</td>
                <td class="business">Business Studies</td>
                <td class="blank-cell">Prayer</td>
            </tr>
            <tr data-day="Wednesday">
                <th>Wednesday</th>
                <td class="early">Early Study</td>
                <td class="biochem">Biochem</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="ml">ML Project</td>
                <td class="blank-cell">Prayer</td>
                <td class="business">Business Studies</td>
                <td class="other">Reading</td>
                <td class="lab">Lab Work</td>
                <td class="buffer-brainstorm">Brainstorm</td>
                <td class="ml">ML Project</td>
                <td class="biochem">Biochem</td>
                <td class="blank-cell">Break</td>
                <td class="teach-megha">Teach Megha</td>
                <td class="blank-cell">Prayer</td>
            </tr>
            <tr data-day="Thursday">
                <th>Thursday</th>
                <td class="early">Early Study</td>
                <td class="business">Business Studies</td>
                <td class="buffer-brainstorm">Brainstorm</td>
                <td class="biochem">Biochem</td>
                <td class="blank-cell">Prayer</td>
                <td class="ml">ML Project</td>
                <td class="other">Research</td>
                <td class="lab">Lab Work</td>
                <td class="buffer-brainstorm">Buffer</td>
                <td class="biochem">Biochem</td>
                <td class="ml">ML Project</td>
                <td class="blank-cell">Break</td>
                <td class="business">Business Studies</td>
                <td class="blank-cell">Prayer</td>
            </tr>
        </tbody>
    </table>
</div>

<script>
    // Get references to DOM elements
    const routineTable = document.getElementById("routineTable");
    const tableRows = routineTable.querySelectorAll("tbody tr");
    const toggleLandscapeBtn = document.getElementById("toggleLandscapeBtn");
    const tableContainer = document.getElementById("tableContainer");

    /**
     * Highlights the current day's row and dims others.
     * Marks completed tasks based on localStorage.
     */
    function initializeRoutineDisplay() {
        const days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
        const today = new Date();
        // Adjust for current day (Sunday is 0, Monday is 1, etc.)
        // We want Friday to be index 0 in our table, so we need to map
        // Friday (5) -> 0, Saturday (6) -> 1, Sunday (0) -> 2, ... Thursday (4) -> 6
        const dayOfWeek = today.getDay(); // 0 for Sunday, 1 for Monday, ..., 6 for Saturday

        let currentDayRowIndex;
        if (dayOfWeek === 5) { // Friday
            currentDayRowIndex = 0;
        } else if (dayOfWeek === 6) { // Saturday
            currentDayRowIndex = 1;
        } else if (dayOfWeek === 0) { // Sunday
            currentDayRowIndex = 2;
        } else { // Monday to Thursday
            currentDayRowIndex = dayOfWeek + 2; // e.g., Monday (1) + 2 = 3
        }

        // Apply current-day and dimmed classes
        tableRows.forEach((row, index) => {
            row.classList.remove("current-day", "dimmed"); // Clear previous states
            if (index === currentDayRowIndex) {
                row.classList.add("current-day");
            } else {
                row.classList.add("dimmed");
            }
        });

        // Load task completion status from localStorage
        tableRows.forEach(row => {
            const dayDataset = row.dataset.day; // Get the data-day attribute (e.g., "Friday")
            const cells = row.querySelectorAll("td"); // Select all td elements in the row
            cells.forEach((cell, i) => {
                // Construct a unique key for localStorage for each cell
                const localStorageKey = `${dayDataset}-${i}`;
                if (localStorage.getItem(localStorageKey) === "done") {
                    cell.style.opacity = "0.2"; // Dim if marked as done
                } else {
                    cell.style.opacity = "1"; // Ensure full opacity if not done
                }
            });
        });
    }

    /**
     * Toggles the completion status of a task cell and saves to localStorage.
     * @param {HTMLElement} cell The table cell element that was clicked.
     * @param {string} dayDataset The 'data-day' attribute of the parent row.
     * @param {number} cellIndex The index of the cell within its row.
     */
    function toggleTaskCompletion(cell, dayDataset, cellIndex) {
        const localStorageKey = `${dayDataset}-${cellIndex}`;
        if (cell.style.opacity === "0.2") {
            cell.style.opacity = "1";
            localStorage.removeItem(localStorageKey); // Remove item if unmarked
        } else {
            cell.style.opacity = "0.2";
            localStorage.setItem(localStorageKey, "done"); // Set item if marked done
        }
    }

    /**
     * Adds click listeners to each task cell for marking completion.
     */
    function addCellClickListeners() {
        tableRows.forEach(row => {
            const dayDataset = row.dataset.day;
            const cells = row.querySelectorAll("td");
            cells.forEach((cell, i) => {
                // Ensure only cells with content are clickable for marking done
                if (cell.textContent.trim() !== "" && !cell.classList.contains('blank-cell')) {
                    cell.addEventListener("click", () => {
                        toggleTaskCompletion(cell, dayDataset, i);
                    });
                }
            });
        });
    }

    /**
     * Toggles the landscape view for the table.
     */
    toggleLandscapeBtn.addEventListener("click", () => {
        tableContainer.classList.toggle("landscape");
        // Adjust button text based on orientation
        if (tableContainer.classList.contains("landscape")) {
            toggleLandscapeBtn.textContent = "ðŸ”„ Exit Landscape View";
        } else {
            toggleLandscapeBtn.textContent = "ðŸŒ„ Toggle Landscape View";
        }
    });

    // Initialize display and add listeners when the DOM is fully loaded
    document.addEventListener("DOMContentLoaded", () => {
        initializeRoutineDisplay();
        addCellClickListeners();
    });

    // Re-initialize display on window load to ensure all styles are applied
    window.onload = initializeRoutineDisplay;

</script>

</body>
</html>
